# hackathon 需求文档

垃圾文档求不骂www

## 简介

食堂预约平台，简化食堂点餐流程以期缩减排队规模从而降低人口密度，鼓励外提的最佳实践者。

用户：

- 高校学生
- 食堂店铺

使用场景：

学生使用平台在线点餐并付款，店铺客户端收到请求后将点餐需求加入任务列表。由系统智能分配任务完成时间。

## 用例说明

用例列表

id|参与者|名称|操作
-|-|-|-
1|学生|个人信息管理|注册、登录、查看修改个人信息
2|学生|浏览店铺信息|查看店铺列表、查看店铺具体菜单
3|学生|购买|选择店铺及其菜品并填写具体要求
4|店铺|个人信息管理|登录（由管理员注册）、店面信息完善
5|店铺|营业管理|开始/结束营业、完成订单
6|管理员|用户管理|注册店铺账号、更改管理员密码
7|学生|订单管理|查看、修改订单

### 1-学生-个人信息管理

- 用例编号：1
- 名称：个人信息管理
- 参与者：学生
- 触发条件：用户点击`学生注册`、`学生登录`、`个人中心`选项
- 前置条件：无
- 后置条件：更新学生用户信息
- 正常流程：
	1. 如果点击`学生注册`，进入注册页面，输入用户名、密码、验证手机号或邮箱
	2. 登录，用手机号或邮箱验证，也可以选择输入用户名密码
	3. 进入`个人中心`页面，可以查看修改用户名、密码、手机号、邮箱，后两者需验证。
- 扩展流程：无
- 补充说明：无

### 2-学生-浏览店铺信息

- 用例编号：2
- 名称：浏览店铺信息
- 参与者：学生
- 触发条件：学生用户点击`大厅`页面内具体店铺
- 前置条件：无
- 后置条件：展示店铺详细信息
- 正常流程：
	1. 用户选择具体店铺，系统返回相应的信息，具体有店铺名称、简介、菜单、当前总预约人数、当天总购买份数。
	2. 菜单可以拥有一个个子页面，即具体菜品，同样有名称、简介，同时要有价格、完成周期、当天已经购买份数、当前预约人数。可以考虑加入评价、赞、踩等扩展。 
- 扩展流程：无
- 补充说明：当前总预约人数和菜品的当前预约人数算法见文末。

### 3-学生-购买

- 用例编号：3
- 名称：购买
- 参与者：学生
- 触发条件：学生在具体菜品页面选择购买
- 前置条件：学生登录
- 后置条件：系统将对应请求发给店铺并加入店铺的任务列表，更新对应菜品的当天购买份数、当前预约人数；更新用户的订单列表。
- 正常流程：
	1. 学生用户选择菜品购买服务
	2. 进入购买页面，填写份数、取餐时间、额外要求
	3. 系统计算价格并显示
	4. 学生用户点击支付
	5. 系统检查、返回成功页面，同时更新店铺任务列表、用户的订单列表。
- 扩展流程：
	1. 若用户未登录，则返回`个人中心`页面提醒登录/注册
	2. 若用户选择的取餐时间晚于店铺最晚营业时间，则不予支付
	3. 用户的取餐时间选择需在当前的至少`x`分钟以外。`x`是对应菜品的准备时间。
- 补充说明：无

### 4-店铺-个人信息管理

- 用例编号：4
- 名称：个人信息管理
- 参与者：店铺
- 触发条件：用户点击、`店铺注册`、`店铺登录`、`个人中心`选项
- 前置条件：无
- 后置条件：更新店铺用户信息
- 正常流程：
	1. 如果点击`店铺注册`，则进入注册页面，填写店铺名称，密码，上传在食堂的位置和照片、营业执照，验证手机号或邮箱，交由管理员审核
	2. 登录，用手机号或邮箱验证，也可以选择输入店铺名密码
	3. 进入`个人中心`页面，可以更新上述信息，也可以更新营业时间、菜品。
	4. 若更新菜品，需填写名称、描述、价格、是否售罄、完成周期。
- 扩展流程：无
- 补充说明：无

### 5-店铺-营业

- 用例编号：5
- 名称：营业
- 参与者：店铺
- 触发条件：店铺用户点击`个人中心` `开始/结束营业`，在`任务列表`里对具体订单点击`完成订单`
- 前置条件：无
- 后置条件：更新活跃店铺信息，更新具体店铺的任务列表
- 正常流程：
	1. 若点击`开始营业`，则店铺出现在大厅上，开始接单
	2. 若点击`结束营业`，则店铺从大厅消失，结束接单
	3. 在`任务列表`里选择`完成订单`，则订单从其任务列表里消失、通知相应买家、更新当前（总）预约人数。
- 扩展流程：
	1. 若点击`结束营业时`还有未完成订单，则不予结束
- 补充说明：无

### 6-管理员-用户管理

- 用例编号：6
- 名称：用户管理
- 参与者：管理员
- 触发条件：管理员在选择`用户管理`、`密码管理`
- 前置条件：管理员已经登录
- 后置条件：更新用户信息
- 正常流程：
	1. 若选择`用户管理`，则根据用户id、用户名搜索并查阅、修改用户信息，也可增加学生用户
	2. `用户管理`中有`注册请求`，可以对店铺的注册进行审批
	3. 若选择`密码管理`，则可以对密码进行修改
- 扩展流程：无
- 补充说明：管理员注册应该是开发阶段的事情

### 7-学生-订单管理 

- 用例编号：7
- 名称：订单管理
- 参与者：学生
- 触发条件：学生用户点击`我的订单`
- 前置条件：学生用户已经登录
- 后置条件：更新订单信息
- 正常流程：
	1. 显示用户订单
	2. 用户可以选择修改要求，但是需要在取餐时间的5分钟之外
	3. 订单信息应该包括订单名称、取餐时间地点、取餐码
- 扩展流程：无
- 补充说明：
	1. 不支持取消订单 
	2. 取餐码由系统生成，每个店铺的取餐码是独立的，店铺可以选择用记号笔写在餐盒上...


## 补充

1. 店铺的`任务列表`
	- 店铺的任务列表需要写一个排序算法，要求是根据目前的取餐时间要求来分配店铺什么时候该做什么。当然店铺自己提前完成也没问题。需要考虑到菜品的完成周期，尽量让菜品在用户取餐半小时之内完成保证温度。如果任务过多可以放宽，最多不超过一小时。
	- 可以这么理解，任务列表里的所有任务被分为`当前需要做的`和`当前不应该做`的。所谓`当前预约人数`就是看`当前需要做的`订单的数量。
2. `大厅`展示
	- 大厅内店铺展示也需要写一个排序算法，可以以总点餐人数排序，也可以以当前预约人数排序。当前预约人数是和上边那个任务分配算法匹配的，任务分配算法当前给他们排了多少任务就是多少预约人数。
	- 大厅也需要筛选算法，根据食堂来筛选。搜索也需要，通过店铺名、菜名搜索。
3. 管理员这个概念怎么实现似乎得看前端的想法。
4. 食堂预约系统的开放时间如果是全天对配套设施要求很高，我们写的时候需限制开放时间，具体大概是饭点的前1-2小时内比较合适。但是考虑到扩展性，在做ppt的时候可以简要介绍一下如果不限制的情况。这得是学校完全支持才可能跑起来。
5. 我在考虑要不要限制只有外带才可以用预约系统，因为有些难以解决堂食外带谁更优先的问题。在ppt中可以展望一下，如果（我的叔叔于勒也在这艘船上，那该是多么美好的事情啊！）可以完全没有堂食，就真的是为抗疫做出了很大贡献。
